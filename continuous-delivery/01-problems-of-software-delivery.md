# 软件交付的问题

## 引言

本书的核心模式是`部署流水线`，以`持续集成`理论作为其理论基石

部署流水线有三个目标
* 让软件构建，部署，测试和发布过程对所有人可见，促进合作
* 改善反馈，能在整个过程中更早的发现和解决问题（做一件事，有问题发生是一定的，重要的是快速的定位和解决问题）
* 使在任何环境下部署和发布任意版本的应用成为自动化得过程

一个简单的简单的`部署流水线`

提交阶段 ==> 自动化验收测试 ==> 自动化容量测试 ==> 手工测试 ==> 发布

## 一些常见的反模式

### 手工部署软件

这个反模式一般具有如下特征

* 有一份详尽的操作文档，其中描述了多出需要注意的地反
* 手工测试程序是否运行正确
* 总有客户来问，部署怎么又出问题了
* 如果是集群环境，个环境配置经常有出入
* 发布过程时间较长
* 发布结果无法预测（凭运气）
* 经常加班，还搞不定问题

理想的部署流程应该是

1. 挑选要部署的版本和环境
2. 按一下“部署”按钮

为什么需要部署自动化

* 使部署过程可重复
* 免去部署文档的维护，一个部署脚本即是所有文档
* 部署过程可审计追踪
* 摆脱对人的过分依赖

### 开发完成之后才向生产环境部署

经常出现的情况

* 运维人员之前一直没有接触过应用程序
* 程序相关的配置，数据库脚本，部署文档等都没有在正式环境下测试过
* 开发团队和运维团队协作太少

导致的各种问题

* 第一次部署成了噩梦
* 开发环境和部署环境差距越大，问题越多
* 各团队之间协作焦头烂额

解决方案

将测试，部署和发布活动都纳入到开发过程中，让他们成为正常开发流程的一部分，对部署过程也进行测试

### 生产户环境的手工配置




